var device={isAndroid:-1<navigator.userAgent.toLowerCase().indexOf("android"),isIos:null!=navigator.userAgent.match(/(iPod|iPhone|iPad)/),isChrome:/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())},common={qrcodeUrl:location.href,accountCode:"",channelCode:"",subChannelCode:"",inviteCode:"",getUrlQuery:function(o){var e=new RegExp("(^|&)"+o+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},getParms:function(){common.accountCode=common.getUrlQuery("accountCode")||"001",common.channelCode=common.getUrlQuery("channelCode")||"01",common.subChannelCode=common.getUrlQuery("subChannelCode")||"official",common.inviteCode=common.getUrlQuery("inviteCode")||""},init:function(){common.getParms()}};$(function(){common.init()});var config={iosUrl:"itms-services://?action=download-manifest&url=",appHost:"https://www.5.app",downHost:"https://www.5.com",downloadUrlAndroid:"",downloadUrlIos:"",app_code:"0000",setDownUrl:function(){device.isAndroid?(config.app_code="0032",config.downloadUrlAndroid=config.downHost+"/download/android/"+config.app_code+common.channelCode+"_"+common.subChannelCode+".apk"):device.isIos&&(config.app_code="0031",config.downloadUrlIos=config.iosUrl+config.downHost+"/download/ios/"+common.accountCode+"_"+config.app_code+common.channelCode+"_"+common.subChannelCode+".plist")},init:function(){config.setDownUrl()}};$(function(){config.init()});var objApp={saveInviteCode:function(){$.ajax({url:config.appHost+"/promo/from/website?inviteCode="+common.inviteCode,type:"GET",contentType:"application/json",dataType:"jsonp"})},addClipboard:function(o,e){var n=location.origin+location.pathname+"?inviteCode="+common.inviteCode+"=inviteCode";$("#bar2").val(n);var i=new ClipboardJS(o,{container:document.getElementById(e)});i.on("success",function(o){objApp.saveInviteCode()}),i.on("error",function(o){console.log("亲，此浏览器不支持，请手动复制粘贴吧")})},initClick:function(){$.fn.toast=function(o){$("").appendTo(document.body);var e=setTimeout(function(){$(".dalutoast").remove(),clearTimeout(e)},2e3)},$(".download-btn").click(function(){device.isIos||device.isAndroid?($("body").toast(""),$("html,body").animate({scrollTop:500},200),objApp.addClipboard(".download-btn","bar2"),objApp.initSiteUser(2),device.isIos?location.href=config.downloadUrlIos:device.isAndroid&&(location.href=config.downloadUrlAndroid)):$(".dialog-container").removeClass("hide")}),$(".dialog-container").click(function(){$(".dialog-container").addClass("hide")})},mySwipe:function(){new Swiper(document.getElementById("mySwipe"),{loop:!0,autoplay:!0,speed:400,auto:1e3,continuous:!0,disableScroll:!1,stopPropagation:!1,pagination:{el:".swiper-pagination",type:"bullets"}})},makeCode:function(){new QRCode(document.getElementById("qrcode"),{width:100,height:100}).makeCode(common.qrcodeUrl)},initSiteUser:function(o){$.ajax({type:"get",url:config.appHost+"/log/officialWebsiteUser",dataType:"json",timeout:3e3,data:{appCode:config.app_code,channelCode:common.channelCode,subChannelCode:common.subChannelCode,type:o},success:function(o){console.log("res:",o)},error:function(o){console.log("err:",o&&o.statusText)}})},checkPlatForm:function(){device.isAndroid||device.isIos?($("#bar").focus(function(){document.activeElement.blur()}),device.isIos?(812==screen.availHeight&&375==screen.availWidth&&"375"==window.innerWidth&&"812"==window.innerHeight&&($(".ewm-tk").css("margin","2rem auto 1rem"),$(".bg-text").addClass("bgText")),$(".ios-tips").removeClass("hide"),$(".android-tips").addClass("hide"),$(".download-head >.download-btn").html("iOS下载")):device.isAndroid?($(".ios-tips").addClass("hide"),$(".android-tips").removeClass("hide"),$(".download-head >.download-btn").html("Android下载")):window.prompt("请更换浏览器访问！")):($(".ios-tips").removeClass("hide"),$(".android-tips").removeClass("hide"),$(".download-head >.download-btn").html("立即下载"),$(".a_downcont").css("display","none"),$(".a_ios").find("img").attr("src","images/wap-icon-ios.png"),$(".a_android").find("img").attr("src","images/wap-icon-android.png"),objApp.makeCode())},isType:function(o){switch(o){case"001":$(".ios-tips img").attr("src","images/ios.png"),$(".text-content-step3").text("3.按下【“KAREN LLC”描述文件】");break;case"002":$(".ios-tips img").attr("src","images/ios-002-3aad45cfdb.png"),$(".text-content-step3").text("3.按下【“Bvsic LLC”描述文件】");break;case"003":$(".ios-tips img").attr("src","images/ios-003.png"),$(".text-content-step3").text("3.按下【“TTC Energy Joint Sto Company”描述文件】");break;case"004":$(".ios-tips img").attr("src","images/ios-004.png"),$(".text-content-step3").text("3.按下【“MASTER TECH SIA”描述文件】");break;case"005":$(".ios-tips img").attr("src","images/ios-005.png"),$(".text-content-step3").text("3.按下【“ICALL EOOD”描述文件】")}},init:function(){objApp.isType(common.accountCode),objApp.checkPlatForm(),objApp.mySwipe(),objApp.initClick()}};$(function(){objApp.init()});